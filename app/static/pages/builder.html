<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ResumeAI Studio</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  
  <link rel="stylesheet" href="/static/css/navbar.css">
  <link rel="stylesheet" href="/static/css/builder.css">
  <link rel="stylesheet" href="/static/css/styles.css">
  
  <!-- PDF.js Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>

<nav class="navbar">
  <div class="nav-container">
    <div class="brand">ResumeAI<span class="dot">.</span></div>
    <button class="hamburger" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="nav-links">
      <a href="/profile" class="nav-link">My Profile</a>
      <a href="/builder" class="nav-link active">Builder</a>
      <a href="/pricing" class="nav-link">Pricing</a>
      <a href="/" class="nav-link logout" onclick="logout(); return false;">Sign Out</a>
    </div>
  </div>
</nav>

<main class="studio-container">

  <section class="editor-pane">
    
    <div class="pane-header">
      <h2>Builder Studio</h2>
      <p class="modal-subtitle">Use Desktop for best experience</p>
    </div>

    <div class="editor-scroll-content">
      
      <div class="input-group">
        <label class="input-label">
          <span><span class="material-icons-round" style="font-size:16px; vertical-align:middle;">palette</span> Visual Style</span>
        </label>
        <select id="styleSelect" class="modern-select">
          <option value="Harvard">Harvard Standard (Clean)</option>
          <option value="Tech">Tech Modern (Bold)</option>
          <option value="Creative">Creative (Two-Column)</option>
        </select>
      </div>

      <div class="input-group">
        <label class="input-label">
          <span>Your Experience</span>
          <a class="upload-link" >
            <span class="material-icons-round" style="font-size:14px; vertical-align:middle;">upload_file</span> Upload PDF
          </a>
          <input type="file" id="fileUpload" style="display:none" accept=".pdf">
        </label>
        <textarea id="resumeText" placeholder="Paste your current resume content here, or upload a PDF of Your CV Details above..."></textarea>
        <div id="resumeCounter" style="font-size:12px; color:#666; margin-top:4px; text-align:right;"></div>
      </div>

      <div class="input-group">
        <label class="input-label">Target Job Description</label>
        <textarea id="jobDescription" placeholder="Paste the job description here. The AI will optimize keywords for this specific role..."></textarea>
        <div id="jobCounter" style="font-size:12px; color:#666; margin-top:4px; text-align:right;"></div>
      </div>

    </div>

    <div class="editor-footer">
      
      <div class="credits-display">
         <span class="material-icons-round" style="font-size:14px; color:#F59E0B;">bolt</span>
         <span id="creditCount">-</span> Credits Available
      </div>

      <button class="btn-magic" id="generateBtn" onclick="generateResume()">
        <span class="material-icons-round">auto_awesome</span>
        Generate Resume
      </button>

    </div>
  </section>


<section class="preview-pane">
    
    <div class="preview-hud">
      <div class="hud-group">
        <div class="view-toggle-container">
            <button class="view-tab active" onclick="switchView('resume')">
                <span class="material-icons-round">description</span> Resume
            </button>
            <button class="view-tab" onclick="switchView('coverletter')">
                <span class="material-icons-round">mail</span> Cover Letter
            </button>
              <!--  <button class="view-tab" onclick="switchView('history')">
                  <span class="material-icons-round">history</span> History
              </button> -->
        </div>
      </div>
      
      <div class="hud-group" id="previewActions"> <div class="ats-score-pill" id="atsContainer">
           <div class="score-circle">
             <div class="score-inner" id="atsScore">--</div>
           </div>
           <span>ATS Score</span>
        </div>
        <button class="btn-ghost" onclick="printActiveDocument()">
          <span class="material-icons-round">download</span> PDF
        </button>
      </div>
    </div>

    <div class="preview-scroller">
      
      <div id="output" class="paper-a4">
        <div class="empty-state">
           <span class="material-icons-round empty-icon">description</span>
           <h3>Ready to Create</h3>
           <p>Enter your details on the left and hit Generate.</p>
        </div>
      </div>

      <div id="output-cl" class="paper-a4" style="display: none;">
        <div class="empty-state">
           <span class="material-icons-round empty-icon">mark_email_unread</span>
           <h3>Cover Letter</h3>
           <p>Switching contexts... <br>Click "Generate Cover Letter" to start.</p>
        </div>
      </div>

      <div id="output-history" style="display: none; padding: 20px;">
          </div>

    </div>

    </section>

<div id="clModal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3><span class="text-gradient">Craft Your Narrative</span></h3>
            
            <button onclick="closeCLModal()" class="btn-icon"><span class="material-icons-round">close</span></button>
        </div>
        <div class="modal-body">
            <p class="modal-subtitle">The AI knows your skills. Tell us your motivation.</p>
            
            <div class="input-group">
                <label class="input-label">Hiring Manager Name (Optional)</label>
                <input type="text" id="clManager" class="modern-input" placeholder="e.g. Mr. Smith or Hiring Team">
            </div>

            <div class="input-group">
                <label class="input-label">
                  Why this company? (The Hook)
                  <a class="upload-link">
                    <span class="material-icons-round" style="font-size:14px; vertical-align:middle;">upload_file</span> Upload
                  </a>
                  <input type="file" id="clMotivationPdf" style="display:none" accept=".pdf">
                </label>
                <textarea id="clMotivation" class="modern-textarea short" placeholder="I've admired [Company] for years because..."></textarea>
                <div id="clMotivationCounter" style="font-size:11px; color:#666; margin-top:3px; text-align:right;"></div>
            </div>

            <div class="input-group">
                <label class="input-label">
                  Key Achievement to Highlight
                  <a class="upload-link">
                    <span class="material-icons-round" style="font-size:14px; vertical-align:middle;">upload_file</span> Upload
                  </a>
                  <input type="file" id="clHighlightPdf" style="display:none" accept=".pdf">
                </label>
                <textarea id="clHighlight" class="modern-textarea short" placeholder="e.g. My success in scaling the database..."></textarea>
                <div id="clHighlightCounter" style="font-size:11px; color:#666; margin-top:3px; text-align:right;"></div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-magic" onclick="submitCoverLetterGen()">
                <span class="material-icons-round">auto_awesome</span> Write Letter
            </button>
        </div>
    </div>
</div>

  </section>

</main>

<script src="/static/js/app.js"></script>
<script src="/static/js/common.js"></script>

<script>
    // Visual Logic for Gauge
    function updateGauge(score) {
        const deg = (score / 100) * 360;
        document.querySelector('.score-circle').style.setProperty('--score-deg', `${deg}deg`);
        document.getElementById('atsScore').innerText = score;
    }
</script>

<div id="loadingOverlay" class="loading-overlay">
  <div class="spinner"></div>
  <p>Generating your resume...</p>
</div>

</body>
</html>